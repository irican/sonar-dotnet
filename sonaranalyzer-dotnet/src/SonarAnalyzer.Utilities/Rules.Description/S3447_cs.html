<p>将 <code>ref</code> 或 <code>out</code> 与 <code>[Optional]</code> 一起使用既相互矛盾又让人费解。<code>[Optional]</code>表示该参数可不必提供，然而 <code>out</code> 和 <code>ref</code> 意味着参数将用于向调用者返回数据（<code>ref</code> 还表示参数也可用来将数据返回到方法中）。</p>
<p>因此，对你将要作为结果返回给方法的参数使用 <code>[Optional]</code> 是没有意义的。事实上，编译器会对这样的代码报错。不幸的是，编译器会在省略了 <code>[Optional]</code> 参数的方法调用出报错，而不是问题的源头——方法声明处。 </p>
<h2>不合规的代码示例</h2>
<pre>
class MyClass
{
    public void DoStuff([Optional] ref int i) // 不合规
    {
        Console.WriteLine(i);
    }

    public static void Main()
    {
        new MyClass().DoStuff(); // 这里编译无法通过，会报告错误CS7036
    }
}
</pre>
<h2>合规的解决方案</h2>
<pre>
class MyClass
{
  public void DoStuff(ref int i)
  {
    Console.WriteLine(i);
  }

  public static void Main()
  {
    var i = 42;
    new MyClass().DoStuff(ref i);
  }
}
</pre>

