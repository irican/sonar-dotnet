<p>将IP地址硬编码是安全敏感的（security-sensitive），它已经导致了如下漏洞的产生：</p>
<ul>
  <li> <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-5901">CVE-2006-5901</a> </li>
  <li> <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2005-3725">CVE-2005-3725</a> </li>
</ul>
<p>现在的服务由于其缩放性和冗余度的需求具有不断变化的体系结构。因此认为一项服务总是保持同样的IP地址的想法是错误的。一旦该服务发生变动，被硬编码了的IP也必须进行修改。而这会影响产品的开发、交付和部署：</p>
<ul>
  <li> 每次出现这种情况，开发者都必须进行一次快速修复，而不是让操作团队更改配置文件。 </li>
  <li> 这种行为强制在每个环境里使用相同的地址（dev, sys, qa, prod）。 </li>
</ul>
<p>最后但同样重要的一点是，硬编码IP的行为会影响应用程序的安全性。攻击者可能能够对代码进行反编译，从而发现潜在的敏感地址。他们可以对该地址上的服务进行拒绝服务攻击或是IP欺骗。虽然这些攻击一直都有可能发生，但如果IP地址被硬编码，修复速度就会慢很多，这相当于增强了攻击的威力。</p>
<h2>建议的安全编码方式</h2>
<ul>
  <li> 使IP地址可配置。 </li>
</ul>
<h2>不合规的代码示例</h2>
<pre>
var ip = "192.168.12.42";
var address = IPAddress.Parse(ip);
</pre>
<h2>合规的解决方案</h2>
<pre>
var ip = ConfigurationManager.AppSettings["myapplication.ip"];
var address = IPAddress.Parse(ip);
</pre>
<h2>例外</h2>
<ul>
  <li> 尽管"::"是有效的IPv6地址，但当它出现时此规则不作报告。 </li>
  <li> 127.0.0.1是合规的，因为环回地址不被认为是敏感的。 </li>
</ul>
<h2>请参阅</h2>
<ul>
  <li> OWASP Top 10 2017 Category A3 - Sensitive Data Exposure </li>
  <li> <a href="https://www.securecoding.cert.org/confluence/x/qQCHAQ">CERT, MSC03-J.</a> - Never hard code sensitive information </li>
</ul>

