<p>在带有激活的调试特性的生产环境中交付代码是安全敏感的。它在过去导致了以下漏洞：</p>
<ul>
  <li> <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-1999007">CVE-2018-1999007</a> </li>
  <li> <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-5306">CVE-2015-5306</a> </li>
  <li> <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2006">CVE-2013-2006</a> </li>
</ul>
<p>应用程序的调试特性使开发人员能够更容易地发现bug。它通常提供对运行应用程序的系统和用户的详细信息的访问。有时甚至可以执行自定义命令。因此，在生产服务器上部署已激活调试功能的应用程序非常危险。</p>
<h2>询问是否有下列问题：</h2>
<ul>
  <li> 支持应用程序调试特性的代码或配置部署在生产服务器上。</li>
  <li> 应用程序在默认情况下运行，并激活调试功能。</li>
</ul>
<p> 如果你对这些问题中的任何一个回答是肯定的，那么你就有风险。</p>
<h2> 推荐的安全编码实践 </h2>
<p>不要在生产服务器上启用调试功能。</p>
<p>The .Net Core框架提供了多种特性，可以在调试期间提供帮助。<code>Microsoft.AspNetCore.Builder.IApplicationBuilder.UseDeveloperExceptionPage</code> 和<code>Microsoft.AspNetCore.Builder.IApplicationBuilder.UseDatabaseErrorPage</code> 是它们中的两个。确保在生产中禁用这些特性。</p>
<p>使用 <code>if (env.IsDevelopment())</code> 禁止调试代码。</p>
<h2>可疑代码示例</h2>
<p>当调用下列.Net Core 方法时，此规则会引发代码：<code>Microsoft.AspNetCore.Builder.IApplicationBuilder.UseDeveloperExceptionPage</code>，<code>Microsoft.AspNetCore.Builder.IApplicationBuilder.UseDatabaseErrorPage</code>。当 <code>if(env.IsDevelopment())</code> 禁用这些调用时，不会引发任何问题。</p>
<pre>
using Microsoft.AspNetCore.Builder;
using Microsoft.AspNetCore.Hosting;

namespace mvcApp
{
    public class Startup2
    {
        public void Configure(IApplicationBuilder app, IHostingEnvironment env)
        {
            if (env.IsDevelopment())
            {
                // 以下调用没有问题，因为它们在生产中是禁用的
                app.UseDeveloperExceptionPage();
                app.UseDatabaseErrorPage();
            }
            // 些调用是有问题的，因为它们似乎将在生产中运行
            app.UseDeveloperExceptionPage(); // 可疑的
            app.UseDatabaseErrorPage(); // 可疑的
        }
    }
}

</pre>
<h2>例外</h2>
<p>此规则不分析配置文件。确保这些文件中默认没有启用调试模式。</p>
<h2>请参阅</h2>
<ul>
  <li> <a href="http://cwe.mitre.org/data/definitions/489.html">MITRE, CWE-489</a> - Leftover Debug Code </li>
  <li> <a href="http://cwe.mitre.org/data/definitions/215.html">MITRE, CWE-215</a> - Information Exposure Through Debug Information </li>
  <li> <a href="https://www.owasp.org/index.php/Top_10-2017_A3-Sensitive_Data_Exposure">OWASP Top 10 2017 Category A3</a> - Sensitive Data Exposure </li>
</ul>

