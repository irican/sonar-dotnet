<p>只有两条 <code>cases</code> 从句的 <code>switch</code> 语句或是同一个 <code>if</code> 结构中操作相同的分支可能只是代码的重复，但在最坏的情况下则是编码错误（coding error）。如果两个实例确实都需要相同的逻辑，那么在 <code>if</code> 结构里可以把它们写在一起，在 <code>switch</code> 里可以从一个fall through到另一个去。</p>
<h2>不合规的代码示例</h2>
<pre>
switch (i)
{
  case 1:
    DoFirst();
    DoSomething();
    break;
  case 2:
    DoSomethingDifferent();
    break;
  case 3:  // 不合规；重复了case 1的操作
    DoFirst();
    DoSomething();
    break;
  default:
    DoTheRest();
}

if (a &gt;= 0 &amp;&amp; a &lt; 10)
{
  DoFirst();
  DoTheThing();
}
else if (a &gt;= 10 &amp;&amp; a &lt; 20)
{
  DoTheOtherThing();
}
else if (a &gt;= 20 &amp;&amp; a &lt; 50)   // 不合规；重复了第一个条件
{
  DoFirst();
  DoTheThing();
}
</pre>
<h2>例外</h2>
<p><code>if</code> 链中只包含一行代码的块语句被此规则忽略，<code>switch</code> 语句中只有一行代码或者没有后跟 <code>break</code>的块语句也是如此。</p>
<pre>
if (a &gt;= 0 &amp;&amp; a &lt; 10)
{
  DoTheThing();
}
else if (a &gt;= 10 &amp;&amp; a &lt; 20)
{
  DoTheOtherThing();
}
else if (a &gt;= 20 &amp;&amp; a &lt; 50)    //没有问题，有意这样写通常是为了增强可读性
{
  DoTheThing();
}
</pre>
<p>但是这种例外不包括没有 <code>else</code> 的 <code>if</code> 链，或是在所有分支都只有同一行代码时，没有default子句的 <code>switch</code>，对于 <code>if</code> 链含有 <code>else</code>，或是 <code>switch</code> 语句含有default子句的情况，规则{rule:csharpsquid:S3923}会引发一个问题。 </p>
<pre>
if(a == 1)
{
  doSomething();  //不合规，有可能是刻意这样写的但可能性极小
}
else if (a == 2)
{
  doSomething();
}
</pre>

